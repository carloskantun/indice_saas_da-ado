<!DOCTYPE html>
<html>
<head>
    <title>Test Events</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Test de Eventos</h1>
    
    <form id="expenseForm">
        <input type="text" name="test" value="test">
        <button type="submit">Submit Expense</button>
    </form>
    
    <form id="orderForm">
        <input type="text" name="test" value="test">
        <button type="submit">Submit Order</button>
    </form>
    
    <form id="providerForm">
        <input type="text" name="test" value="test">
        <button type="submit">Submit Provider</button>
    </form>
    
    <script>
        // Simulamos las funciones del archivo principal
        function handleExpenseSubmit(e) {
            console.log('‚úÖ handleExpenseSubmit llamado correctamente', this);
            alert('Expense form submitted!');
        }
        
        function handleOrderSubmit(e) {
            console.log('‚úÖ handleOrderSubmit llamado correctamente', this);
            alert('Order form submitted!');
        }
        
        function handleProviderSubmit(e) {
            console.log('‚úÖ handleProviderSubmit llamado correctamente', this);
            alert('Provider form submitted!');
        }
        
        // Copiamos exactamente el c√≥digo de bindBasicEvents
        function bindBasicEvents() {
            console.log('üîó Binding eventos b√°sicos...');
            
            // Formulario de gastos
            $(document).off('submit', '#expenseForm').on('submit', '#expenseForm', function(e) {
                e.preventDefault();
                console.log('üìù Formulario de gastos enviado');
                handleExpenseSubmit.call(this, e);
            });
            
            // Formulario de √≥rdenes de compra
            $(document).off('submit', '#orderForm').on('submit', '#orderForm', function(e) {
                e.preventDefault();
                console.log('üì¶ Formulario de orden de compra enviado');
                handleOrderSubmit.call(this, e);
            });
            
            // Formulario de proveedores
            $(document).off('submit', '#providerForm').on('submit', '#providerForm', function(e) {
                e.preventDefault();
                console.log('üè¢ Formulario de proveedor enviado');
                handleProviderSubmit.call(this, e);
            });
            
            console.log('‚úÖ Eventos b√°sicos vinculados correctamente');
        }
        
        $(document).ready(function() {
            console.log('Documento listo, vinculando eventos...');
            bindBasicEvents();
            
            // Funci√≥n de diagn√≥stico
            window.diagnosticarEventos = function() {
                console.log('üîç DIAGN√ìSTICO DE EVENTOS:');
                
                const forms = ['#expenseForm', '#orderForm', '#providerForm'];
                forms.forEach(formId => {
                    const form = $(formId);
                    if (form.length > 0) {
                        console.log(`‚úÖ Formulario ${formId} encontrado`);
                        
                        const events = $._data(form[0], 'events');
                        if (events && events.submit) {
                            console.log(`‚úÖ Evento submit vinculado a ${formId}`);
                        } else {
                            console.log(`‚ùå Evento submit NO vinculado a ${formId}`);
                        }
                    } else {
                        console.log(`‚ùå Formulario ${formId} NO encontrado`);
                    }
                });
            };
        });
    </script>
</body>
</html>
